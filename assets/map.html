<!-- <!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Leaflet Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        html, body, #map {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        var map = L.map('map').setView([10.762622, 106.660172], 13);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        function addMarkers(data) {
            L.geoJSON(data).addTo(map);
        }
    </script>
</body>
</html> -->

<!------------------------------------------------------------------------------------------------------------------------------------------->

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        body {
            margin: 0;
            padding: 0;
        }
        #map {
            width: 100%;
            height: 100vh;
        }
        
        /* Custom marker styles */
        .custom-marker {
            background: #007AFF;
            border: 3px solid #fff;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
        
        .custom-marker:hover {
            background: #0056CC;
            transform: scale(1.1);
        }
        
        /* Popup styles */
        .leaflet-popup-content {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .location-popup {
            padding: 8px;
            min-width: 200px;
        }
        
        .location-name {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 4px;
            color: #333;
        }
        
        .location-description {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }
        
        .location-rating {
            color: #FF9529;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <script>
        // Khởi tạo bản đồ
        const map = L.map('map').setView([10.762622, 106.660172], 13); // Tọa độ mặc định (HCM)
        
        // Thêm tile layer (OpenStreetMap)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);
        
        // Dữ liệu địa điểm du lịch mẫu
        const locations = [
            {
                id: 1,
                name: "Chợ Bến Thành",
                lat: 10.7720,
                lng: 106.6983,
                description: "Chợ truyền thống nổi tiếng ở Sài Gòn",
                rating: 4.5,
                type: "market"
            },
            {
                id: 2,
                name: "Dinh Độc Lập",
                lat: 10.7776,
                lng: 106.6954,
                description: "Di tích lịch sử quan trọng",
                rating: 4.7,
                type: "historical"
            },
            {
                id: 3,
                name: "Nhà thờ Đức Bà",
                lat: 10.7798,
                lng: 106.6990,
                description: "Nhà thờ cổ kiến trúc Pháp",
                rating: 4.6,
                type: "religious"
            },
            {
                id: 4,
                name: "Bưu điện Thành phố",
                lat: 10.7792,
                lng: 106.6995,
                description: "Công trình kiến trúc cổ điển",
                rating: 4.4,
                type: "historical"
            },
            {
                id: 5,
                name: "Phố đi bộ Nguyễn Huệ",
                lat: 10.7733,
                lng: 106.7030,
                description: "Không gian văn hóa và giải trí",
                rating: 4.3,
                type: "entertainment"
            }
        ];
        
        // Thêm markers cho các địa điểm
        locations.forEach(location => {
            const marker = L.marker([location.lat, location.lng])
                .addTo(map)
                .bindPopup(`
                    <div class="location-popup">
                        <div class="location-name">${location.name}</div>
                        <div class="location-description">${location.description}</div>
                        <div class="location-rating">⭐ ${location.rating}/5</div>
                    </div>
                `);
                
            // Thêm sự kiện click cho marker
            marker.on('click', function() {
                // Gửi thông tin địa điểm về React Native
                if (window.ReactNativeWebView) {
                    window.ReactNativeWebView.postMessage(
                        JSON.stringify({
                            type: 'MARKER_CLICK',
                            data: location
                        })
                    );
                }
            });
        });
        
        // Xử lý sự kiện từ React Native
        window.onLocationSearch = function(keyword) {
            const filteredLocations = locations.filter(loc => 
                loc.name.toLowerCase().includes(keyword.toLowerCase()) ||
                loc.description.toLowerCase().includes(keyword.toLowerCase())
            );
            
            // Zoom đến kết quả tìm kiếm
            if (filteredLocations.length > 0) {
                const group = new L.featureGroup(filteredLocations.map(loc => 
                    L.marker([loc.lat, loc.lng])
                ));
                map.fitBounds(group.getBounds().pad(0.1));
            }
        };
        
        // Thông báo khi map đã load xong
        map.whenReady(() => {
            if (window.ReactNativeWebView) {
                window.ReactNativeWebView.postMessage(
                    JSON.stringify({
                        type: 'MAP_READY',
                        message: 'Bản đồ đã sẵn sàng'
                    })
                );
            }
        });
    </script>
</body>
</html>

